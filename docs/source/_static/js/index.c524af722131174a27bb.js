(()=>{var e,t={7360:(e,t,a)=>{"use strict";var i=a(9963),l=a(1173),s=(a(3744),a(6252)),r=a(3577);const o={id:"vue-container"},n={id:"chartOptions"};var c=a(8023),d=a(3163),p=a(2562),u=a(4763),m=a(6807),h=a(3450),f=a(6786),y=a(3035),g=a.n(y);function x(e=1){return(t,a)=>{const i=g()(t,{units:"metric",precision:e});return i.value+" "+i.unit.slice(0,i.unit.length-1)}}(0,c.D)([d.N,m.N,h.N,p.N,u.N,f.N]);const v={acc1:{name:"acc1",display:"Acc@1",dim:0},acc5:{name:"acc5",display:"Acc@5",dim:1},activations:{name:"activations",display:"Activations",dim:2},flops:{name:"flops",display:"Flops",dim:3},params:{name:"params",display:"Params",dim:4},name:{name:"name",display:"Name",dim:5},url:{name:"url",display:"Url",dim:6}},b={series:[],legend:{type:"plain",show:!0,top:"bottom"},tooltip:{trigger:"item",triggerOn:"mousemove",position:"top",formatter:e=>`<b>${e.data[v.name.dim]}</b><br/>\n       ${v.acc1.display}: ${e.data[v.acc1.dim]}% <br/>\n       ${v.acc5.display}: ${e.data[v.acc5.dim]}% <br/>\n       ${v.flops.display}: ${x(3)(e.data[v.flops.dim])} <br/> \n       ${v.params.display}: ${x(3)(e.data[v.params.dim])} <br/>\n       ${v.activations.display}: ${x(3)(e.data[v.activations.dim])}`}},A={xAxis:{name:"Flops",type:"log",logBase:2},yAxis:{name:"Acc@1",interval:5},toolbox:{left:"center",feature:{dataZoom:{show:!0,xAxisIndex:0,yAxisIndex:0}}},...b},w={parallel:{parallelAxisDefault:{type:"value",nameLocation:"end",nameGap:20}},parallelAxis:[{dim:v.acc1.dim,name:v.acc1.display,type:"value"},{dim:v.flops.dim,name:v.flops.display,type:"log",logBase:2},{dim:v.params.dim,name:v.params.display,type:"log",logBase:2},{dim:v.activations.dim,name:v.activations.display,type:"log",logBase:2}],...b},_={data:()=>({scatterSeries:[],parallelSeries:[],scatter_flops_log:!0,chart_type:"scatter",axisDataOptions:["flops","params","activations"],axisDataSelect:"flops"}),computed:{option:function(){let e=null;if("scatter"===this.chart_type&&0!==this.scatterSeries.length)e={...A},e.series=this.scatterSeries,this.scatter_flops_log?e.xAxis.type="log":e.xAxis.type="value",e.xAxis.name=v[this.axisDataSelect].display,e.series.forEach((e=>{e.encode.x=this.axisDataSelect})),e.xAxis={...e.xAxis,...this.calculateBoundaryWithGap(e.series,v[this.axisDataSelect].dim,e.xAxis.type)},e.yAxis={...e.yAxis,...this.calculateBoundaryWithGap(e.series,0,e.yAxis.type)},e.xAxis.axisLabel={formatter:x(1)};else if("parallel"===this.chart_type&&0!==this.parallelSeries.length){e={...w},e.series=this.parallelSeries;const t=["Flops","Activations","Params"].map((e=>w.parallelAxis.findIndex((t=>t.name===e))));if(this.scatter_flops_log)for(const a of t)e.parallelAxis[a].type="log";else for(const a of t)e.parallelAxis[a].type="value";e.parallelAxis=e.parallelAxis.map((t=>{const a={...t,...this.calculateBoundaryWithGap(e.series,t.dim,t.type)};return a.name.startsWith("Acc")||(a.axisLabel={formatter:x(1)}),a}))}return e},dataDimName:function(){return v}},methods:{parseJson(e){const t={},a={};let i=[];const l=Object.values(v).sort(((e,t)=>e.dim-t.dim));return e.models.forEach((e=>{i=l.map((function(t){return"url"===t.name?`public/${e.uid}.html`:e[t.name]})),t[e.series]=t[e.series]||{type:"scatter",name:e.series,symbolSize:10,itemStyle:{},cursor:"pointer",dimensions:l.map((e=>e.name)),encode:{x:"flops",y:"acc1"},data:[]},t[e.series].data.push(i),a[e.series]=a[e.series]||{type:"parallel",name:e.series,cursor:"pointer",dimensions:l.map((e=>e.name)),data:[],opacity:.6,emphasis:{lineStyle:{width:4,opacity:1}}},a[e.series].data.push(i)})),{scatterSeries:Object.values(t),parallelSeries:Object.values(a)}},redirectUrl(e){e.data[e.data.length-1]&&window.open(e.data[e.data.length-1])},calculateBoundaryWithGap(e,t,a="value",i=.2){const l=e.map((e=>e.data.map((e=>e[t])))).flat();let s=Math.min(...l);const r=s;let o=Math.max(...l);const n=o,c=o-s;if(s=Math.floor(s-c*i),o=Math.ceil(o+c*i),"log"===a){let e=Math.pow(2,Math.ceil(Math.log2(r)));s=e/2,e=Math.pow(2,Math.floor(Math.log2(n))),o=2*e}else s=Math.max(0,s);return{min:s,max:o}}},beforeUpdate(){this.$refs.chart.clear()},mounted(){fetch(`${this.$store.getters.APIBase}/json/data.json`).then((e=>e.json())).then((e=>{const t=this.parseJson(e);this.scatterSeries=t.scatterSeries,this.parallelSeries=t.parallelSeries}))}};a(4894),_.render=function(e,t,a,i,l,c){const d=(0,s.up)("el-switch"),p=(0,s.up)("el-form-item"),u=(0,s.up)("el-option"),m=(0,s.up)("el-select"),h=(0,s.up)("el-form"),f=(0,s.up)("v-chart");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",n,[(0,s.Wm)(h,{inline:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:l.chart_type,"onUpdate:modelValue":t[0]||(t[0]=e=>l.chart_type=e),"active-text":"散点图","inactive-text":"平行坐标图","active-value":"scatter","inactive-value":"parallel"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(d,{modelValue:l.scatter_flops_log,"onUpdate:modelValue":t[1]||(t[1]=e=>l.scatter_flops_log=e),"active-text":"logspace"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(p,{id:"axis-selector",label:"横轴数据源",style:(0,r.j5)("display:"+("scatter"===l.chart_type?"inline-flex":"none"))},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:l.axisDataSelect,"onUpdate:modelValue":t[2]||(t[2]=e=>l.axisDataSelect=e),size:"mini"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.axisDataOptions,(e=>((0,s.wg)(),(0,s.j4)(u,{key:e,label:c.dataDimName[e].display,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["style"])])),_:1})]),(0,s.Wm)(f,{ref:"chart",onClick:c.redirectUrl,option:c.option,id:"chartContainer"},null,8,["onClick","option"])])};const S=_,$={data:()=>({uid:null,tabledata:{}}),computed:{url:function(){return`${this.$store.getters.APIBase}/zoo/${this.uid}`}},mounted(){const e=document.getElementById("modelInfoContainer").dataset.uid;fetch(`${this.$store.getters.APIBase}/json/${e}.json`).then((e=>{if(e.ok)return e.json();throw 404===e.status?(this.tabledata={info:"model not exist"},new Error("model not exist")):(this.tabledata={info:"internal error"},new Error("internal error"))})).then((e=>{this.uid=e.uid,this.tabledata={...e},this.tabledata.oss=`s3://basecls/zoo/${this.uid}`,delete this.tabledata.uid})).catch((e=>{console.error(e)}))},render:function(e,t,a,i,l,o){const n=(0,s.up)("el-descriptions-item"),c=(0,s.up)("el-link"),d=(0,s.up)("el-descriptions");return(0,s.wg)(),(0,s.j4)(d,{title:"",column:2,border:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tabledata,((e,t)=>((0,s.wg)(),(0,s.j4)(n,{key:t,label:t},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(e),1)])),_:2},1032,["label"])))),128)),l.uid?((0,s.wg)(),(0,s.j4)(n,{key:0,label:"download"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:o.url,type:"primary",underline:!1},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.zw)(l.uid),1)])),_:1},8,["href"])])),_:1})):(0,s.kq)("v-if",!0)])),_:1})}},j=(0,a(4709).MT)({getters:{APIBase:()=>"https://oss.iap.hh-b.brainpp.cn/basecls"}});var O=a(4093);const B=document.getElementById("sphinx-pagename");null===B&&console.log("No sphinx pagename found, ignore");const M=B.attributes.pagename.value;console.log(`Sphinx pagename=${M}`),"zoo/index"===M?function(){const e=(0,i.ri)(S);e.component("v-chart",O.ZP),e.use(l.ZP).use(j),e.mount("#model-index")}():M.startsWith("zoo/")&&function(){if(null!==document.getElementById("modelInfoContainer")){const e=(0,i.ri)($);e.use(l.ZP).use(j),e.mount("#modelInfoContainer")}}()},1749:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var i=a(3645),l=a.n(i)()((function(e){return e[1]}));l.push([e.id,"#chartContainer{height:500px;width:100%}#vue-container{margin:0 0 10px 0}#chartOptions{display:flex;justify-content:flex-start;align-items:center}",""]);const s=l},4894:(e,t,a)=>{var i=a(1749);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,a(2611).Z)("a17815fa",i,!1,{})},7106:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg=="}},a={};function i(e){var l=a[e];if(void 0!==l)return l.exports;var s=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,e=[],i.O=(t,a,l,s)=>{if(!a){var r=1/0;for(c=0;c<e.length;c++){for(var[a,l,s]=e[c],o=!0,n=0;n<a.length;n++)(!1&s||r>=s)&&Object.keys(i.O).every((e=>i.O[e](a[n])))?a.splice(n--,1):(o=!1,s<r&&(r=s));o&&(e.splice(c--,1),t=l())}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,l,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e+"../"})(),(()=>{i.b=document.baseURI||self.location.href;var e={826:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var l,s,[r,o,n]=a,c=0;for(l in o)i.o(o,l)&&(i.m[l]=o[l]);if(n)var d=n(i);for(t&&t(a);c<r.length;c++)s=r[c],i.o(e,s)&&e[s]&&e[s][0](),e[r[c]]=0;return i.O(d)},a=self.webpackChunkbasecls_doc=self.webpackChunkbasecls_doc||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=i.O(void 0,[736],(()=>i(7360)));l=i.O(l)})();