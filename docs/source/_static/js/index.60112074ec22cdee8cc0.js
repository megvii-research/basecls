(()=>{var e,t={9205:(e,t,a)=>{"use strict";var i=a(9963),l=a(1391),s=(a(5261),a(6252)),r=a(3577);const n={id:"vue-container"},o={id:"chartOptions"};var c=a(8023),p=a(3163),d=a(2562),u=a(4763),m=a(6807),h=a(3450),f=a(6786),g=a(9123);function y(e=1){return(t,a)=>{const i=(0,g.Z)(t,{units:"metric",precision:e});return i.value+" "+i.unit.slice(0,i.unit.length-1)}}(0,c.D)([p.N,m.N,h.N,d.N,u.N,f.N]);const x={acc1:{name:"acc1",display:"Acc@1",dim:0},acc5:{name:"acc5",display:"Acc@5",dim:1},activations:{name:"activations",display:"Activations",dim:2},flops:{name:"flops",display:"Flops",dim:3},params:{name:"params",display:"Params",dim:4},name:{name:"name",display:"Name",dim:5},url:{name:"url",display:"Url",dim:6}},v={series:[],legend:{type:"plain",show:!0,top:"bottom"},tooltip:{trigger:"item",triggerOn:"mousemove",position:"top",formatter:e=>`<b>${e.data[x.name.dim]}</b><br/>\n       ${x.acc1.display}: ${e.data[x.acc1.dim]}% <br/>\n       ${x.acc5.display}: ${e.data[x.acc5.dim]}% <br/>\n       ${x.flops.display}: ${y(3)(e.data[x.flops.dim])} <br/>\n       ${x.params.display}: ${y(3)(e.data[x.params.dim])} <br/>\n       ${x.activations.display}: ${y(3)(e.data[x.activations.dim])}`}},A={xAxis:{name:"Flops",type:"log",logBase:4},yAxis:{name:"Acc@1",type:"value",interval:5},toolbox:{left:"center",feature:{dataZoom:{show:!0,xAxisIndex:0,yAxisIndex:0}}},...v},b={parallel:{parallelAxisDefault:{nameLocation:"end",nameGap:20}},parallelAxis:[{dim:x.acc1.dim,name:x.acc1.display,type:"value",interval:5},{dim:x.flops.dim,name:x.flops.display,type:"log",logBase:4},{dim:x.params.dim,name:x.params.display,type:"log",logBase:4},{dim:x.activations.dim,name:x.activations.display,type:"log",logBase:4}],...v},w={data:()=>({scatterSeries:[],parallelSeries:[],scatter_flops_log:!0,chart_type:"scatter",axisDataOptions:["flops","params","activations"],axisDataSelect:"flops"}),computed:{option:function(){let e=null;if("scatter"===this.chart_type&&0!==this.scatterSeries.length)e={...A},e.series=this.scatterSeries,this.scatter_flops_log?e.xAxis.type="log":e.xAxis.type="value",e.xAxis.name=x[this.axisDataSelect].display,e.series.forEach((e=>{e.encode.x=this.axisDataSelect})),e.xAxis={...e.xAxis,...this.calculateBoundaryWithGap(e.series,x[this.axisDataSelect].dim,e.xAxis.type)},e.yAxis={...e.yAxis,...this.calculateBoundaryWithGap(e.series,x.acc1.dim,e.yAxis.type)},this.scatter_flops_log?e.xAxis.splitNumber=5:e.xAxis.interval=(e.xAxis.max-e.xAxis.min)/8,e.xAxis.axisLabel={formatter:y(1)};else if("parallel"===this.chart_type&&0!==this.parallelSeries.length){e={...b},e.series=this.parallelSeries;const t=["Flops","Activations","Params"].map((e=>b.parallelAxis.findIndex((t=>t.name===e))));if(this.scatter_flops_log)for(const a of t)e.parallelAxis[a].type="log";else for(const a of t)e.parallelAxis[a].type="value";e.parallelAxis=e.parallelAxis.map((t=>{const a={...t,...this.calculateBoundaryWithGap(e.series,t.dim,t.type)};return a.name.startsWith("Acc")||(a.axisLabel={formatter:y(1)}),a}))}return e},dataDimName:function(){return x}},methods:{parseJson(e){const t={},a={};let i=[];const l=Object.values(x).sort(((e,t)=>e.dim-t.dim));return e.models.forEach((e=>{i=l.map((function(t){return"url"===t.name?`public/${e.uid}.html`:e[t.name]})),t[e.series]=t[e.series]||{type:"scatter",name:e.series,symbolSize:10,itemStyle:{},cursor:"pointer",dimensions:l.map((e=>e.name)),encode:{x:"flops",y:"acc1"},data:[]},t[e.series].data.push(i),a[e.series]=a[e.series]||{type:"parallel",name:e.series,cursor:"pointer",dimensions:l.map((e=>e.name)),data:[],opacity:.6,emphasis:{lineStyle:{width:4,opacity:1}}},a[e.series].data.push(i)})),{scatterSeries:Object.values(t),parallelSeries:Object.values(a)}},redirectUrl(e){e.data[e.data.length-1]&&window.open(e.data[e.data.length-1])},calculateBoundaryWithGap(e,t,a="value",i=.2){const l=e.map((e=>e.data.map((e=>e[t])))).flat();let s=Math.min(...l);const r=s;let n=Math.max(...l);const o=n,c=n-s;if(s=Math.floor(s-c*i),n=Math.ceil(n+c*i),"log"===a){let e=Math.pow(2,Math.ceil(Math.log2(r)));s=e/2,e=Math.pow(2,Math.floor(Math.log2(o))),n=2*e}else s=Math.max(0,s);return{min:s,max:n}}},beforeUpdate(){this.$refs.chart.clear()},mounted(){fetch(`${this.$store.getters.APIBase}/json/data.json`).then((e=>e.json())).then((e=>{const t=this.parseJson(e);this.scatterSeries=t.scatterSeries,this.parallelSeries=t.parallelSeries}))}};a(4153);var S=a(3744);const _=(0,S.Z)(w,[["render",function(e,t,a,i,l,c){const p=(0,s.up)("el-switch"),d=(0,s.up)("el-form-item"),u=(0,s.up)("el-option"),m=(0,s.up)("el-select"),h=(0,s.up)("el-form"),f=(0,s.up)("v-chart");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",o,[(0,s.Wm)(h,{inline:!0},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{modelValue:l.chart_type,"onUpdate:modelValue":t[0]||(t[0]=e=>l.chart_type=e),"active-text":"散点图","inactive-text":"平行坐标图","active-value":"scatter","inactive-value":"parallel"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{modelValue:l.scatter_flops_log,"onUpdate:modelValue":t[1]||(t[1]=e=>l.scatter_flops_log=e),"active-text":"logspace"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(d,{id:"axis-selector",label:"横轴数据源",style:(0,r.normalizeStyle)("display:"+("scatter"===l.chart_type?"inline-flex":"none"))},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{modelValue:l.axisDataSelect,"onUpdate:modelValue":t[2]||(t[2]=e=>l.axisDataSelect=e),size:"mini"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.axisDataOptions,(e=>((0,s.wg)(),(0,s.j4)(u,{key:e,label:c.dataDimName[e].display,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["style"])])),_:1})]),(0,s.Wm)(f,{ref:"chart",onClick:c.redirectUrl,option:c.option,id:"chartContainer"},null,8,["onClick","option"])])}]]),$={data:()=>({uid:null,tabledata:{}}),computed:{url:function(){return`${this.$store.getters.OSSPath}/${this.uid}.pkl`}},mounted(){const e=document.getElementById("modelInfoContainer").dataset.uid;fetch(`${this.$store.getters.APIBase}/json/${e}.json`).then((e=>{if(e.ok)return e.json();throw 404===e.status?(this.tabledata={info:"model not exist"},new Error("model not exist")):(this.tabledata={info:"internal error"},new Error("internal error"))})).then((e=>{this.uid=e.uid,this.tabledata={...e},delete this.tabledata.uid})).catch((e=>{console.error(e)}))}},O=(0,S.Z)($,[["render",function(e,t,a,i,l,n){const o=(0,s.up)("el-descriptions-item"),c=(0,s.up)("el-link"),p=(0,s.up)("el-descriptions");return(0,s.wg)(),(0,s.j4)(p,{title:"",column:2,border:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(l.tabledata,((e,t)=>((0,s.wg)(),(0,s.j4)(o,{key:t,label:t},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.toDisplayString)(e),1)])),_:2},1032,["label"])))),128)),l.uid?((0,s.wg)(),(0,s.j4)(o,{key:0,label:"download"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{href:n.url,type:"primary",underline:!1},{default:(0,s.w5)((()=>[(0,s.Uk)((0,r.toDisplayString)(l.uid)+".pkl",1)])),_:1},8,["href"])])),_:1})):(0,s.kq)("v-if",!0)])),_:1})}]]),j=(0,a(4709).MT)({getters:{APIBase:()=>"https://www.megengine.org.cn/meta/basecls",OSSPath:()=>"https://data.megengine.org.cn/research/basecls/models"}});var B=a(4378);const D=document.getElementById("sphinx-pagename");null===D&&console.log("No sphinx pagename found, ignore");const k=D.attributes.pagename.value;console.log(`Sphinx pagename=${k}`),"zoo/index"===k?function(){const e=(0,i.createApp)(_);e.component("v-chart",B.ZP),e.use(l.Z).use(j),e.mount("#model-index")}():k.startsWith("zoo/")&&function(){if(null!==document.getElementById("modelInfoContainer")){const e=(0,i.createApp)(O);e.use(l.Z).use(j),e.mount("#modelInfoContainer")}}()},4970:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var i=a(8081),l=a.n(i),s=a(3645),r=a.n(s)()(l());r.push([e.id,"#chartContainer{height:500px;width:100%}#vue-container{margin:0 0 10px 0}#chartOptions{display:flex;justify-content:flex-start;align-items:center}",""]);const n=r},4153:(e,t,a)=>{var i=a(4970);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,a(5346).Z)("d0ce127c",i,!1,{})},6270:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg=="}},a={};function i(e){var l=a[e];if(void 0!==l)return l.exports;var s=a[e]={id:e,loaded:!1,exports:{}};return t[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=t,e=[],i.O=(t,a,l,s)=>{if(!a){var r=1/0;for(p=0;p<e.length;p++){for(var[a,l,s]=e[p],n=!0,o=0;o<a.length;o++)(!1&s||r>=s)&&Object.keys(i.O).every((e=>i.O[e](a[o])))?a.splice(o--,1):(n=!1,s<r&&(r=s));if(n){e.splice(p--,1);var c=l();void 0!==c&&(t=c)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[a,l,s]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");a.length&&(e=a[a.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e+"../"})(),(()=>{i.b=document.baseURI||self.location.href;var e={826:0};i.O.j=t=>0===e[t];var t=(t,a)=>{var l,s,[r,n,o]=a,c=0;if(r.some((t=>0!==e[t]))){for(l in n)i.o(n,l)&&(i.m[l]=n[l]);if(o)var p=o(i)}for(t&&t(a);c<r.length;c++)s=r[c],i.o(e,s)&&e[s]&&e[s][0](),e[r[c]]=0;return i.O(p)},a=self.webpackChunkbasecls_doc=self.webpackChunkbasecls_doc||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=i.O(void 0,[736],(()=>i(9205)));l=i.O(l)})();